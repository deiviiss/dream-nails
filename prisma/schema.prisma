generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgres"
  url      = env("DATABASE_URL")
}

model User {
  id         Int       @id @default(autoincrement())
  email      String    @unique
  password   String
  role       String    @default("customer")
  created_at DateTime  @default(now())
  updated_at DateTime?
  Customer   Customer?
}

model SalonService {
  id          Int       @id @default(autoincrement())
  category    String
  name        String
  description String
  price       Float
  created_at  DateTime  @default(now())
  updated_at  DateTime?
}

model Appointment {
  id          Int       @id @default(autoincrement())
  date        DateTime
  service     String
  customer_id Int
  nail_status String
  created_at  DateTime  @default(now())
  updated_at  DateTime?
  Customer    Customer  @relation(fields: [customer_id], references: [id])
}

model Customer {
  id                Int                 @id @default(autoincrement())
  name              String?
  email             String?             @unique
  phone             String?
  user_id           Int                 @unique
  created_at        DateTime            @default(now())
  updated_at        DateTime?
  Appointment       Appointment[]
  User              User                @relation(fields: [user_id], references: [id])
  DesignStyle       DesignStyle[]
  Feedback          Feedback[]
  NailGrowthHistory NailGrowthHistory[]
  Preference        Preference[]
  SpecialEvent      SpecialEvent[]
  VisitHistory      VisitHistory[]
}

model DesignStyle {
  id          Int       @id @default(autoincrement())
  description String
  customer_id Int
  created_at  DateTime  @default(now())
  updated_at  DateTime?
  Customer    Customer  @relation(fields: [customer_id], references: [id])
}

model Feedback {
  id          Int      @id @default(autoincrement())
  customer_id Int
  comment     String
  rating      Int
  created_at  DateTime @default(now())
  Customer    Customer @relation(fields: [customer_id], references: [id])
}

model NailGrowthHistory {
  id          Int      @id @default(autoincrement())
  date        DateTime
  customer_id Int
  nail_length Float
  created_at  DateTime @default(now())
  Customer    Customer @relation(fields: [customer_id], references: [id])
}

model Preference {
  id          Int       @id @default(autoincrement())
  description String
  customer_id Int
  created_at  DateTime  @default(now())
  updated_at  DateTime?
  Customer    Customer  @relation(fields: [customer_id], references: [id])
}

model SpecialEvent {
  id          Int       @id @default(autoincrement())
  date        DateTime
  description String
  customer_id Int
  created_at  DateTime  @default(now())
  updated_at  DateTime?
  Customer    Customer  @relation(fields: [customer_id], references: [id])
}

model VisitHistory {
  id                Int      @id @default(autoincrement())
  date              DateTime
  service           String
  nail_status       String
  nail_photo_before String?
  nail_photo_after  String?
  customer_id       Int
  created_at        DateTime @default(now())
  Customer          Customer @relation(fields: [customer_id], references: [id])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model spatial_ref_sys {
  srid      Int     @id
  auth_name String? @db.VarChar(256)
  auth_srid Int?
  srtext    String? @db.VarChar(2048)
  proj4text String? @db.VarChar(2048)
}
